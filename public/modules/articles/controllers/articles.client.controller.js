// The Original Controller generated by MeanJS
// but not being used anymore
// This is still here, for the purpose of comparing with directive controllers

void (function(angular) {
  
	'use strict';

	angular.module('articles')
		.controller('ArticlesController', ArticlesController)

	ArticlesController.$inject = ['$stateParams', '$location', 'Authentication', 'Articles']
	function ArticlesController($stateParams, $location, Authentication, Articles) {

		var self = this

		self.article = {}
		self.articles = []

		self.authentication = Authentication

		self.create = function() {
			var article = new Articles({
				title: self.article.title,
				content: self.article.content
			})
			article.$save(function(response) {
				$location.path('articles/' + response._id)

				self.article.title = ''
				self.article.content = ''

			}, function(errorResponse) {
				self.error = errorResponse.data.message
			})
		}

		self.remove = function(article) {
			if (article) {
				article.$remove()

				for (var i in self.articles) {
					if (self.articles[i] === article) {
						self.articles.splice(i, 1)
					}
				}
			} else {
				self.article.$remove(function() {
					$location.path('articles')
				})
			}
		}

		self.update = function() {
			var article = self.article

			article.$update(function() {
				$location.path('articles/' + article._id)
			}, function(errorResponse) {
				self.error = errorResponse.data.message
			})
		}

		self.find = function() {
			self.articles = Articles.query()
		}

		self.findOne = function() {
			self.article = Articles.get({
				articleId: $stateParams.articleId
			})
		}
	}

})(angular)
